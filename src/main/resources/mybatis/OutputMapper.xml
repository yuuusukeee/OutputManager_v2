package com.example.outputmanager.mapper;

import java.util.List;

import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

import com.example.outputmanager.domain.Output;

@Mapper
public interface OutputMapper {

    // --- 既存系 ---

    // 主キー検索（Integer版：互換用）
    Output selectById(@Param("id") Integer id);

    // 主キー検索（Long版）
    Output findById(@Param("id") Long id);

    // ユーザーIDで一覧取得
    List<Output> selectByUserId(@Param("userId") Integer userId);

    // 検索（キーワード + カテゴリ + ユーザー）
    List<Output> search(
        @Param("keyword") String keyword,
        @Param("categoryId") Integer categoryId,
        @Param("userId") Integer userId
    );

    // 新規登録
    int insert(Output output);

    // 更新
    int update(Output output);

    // 削除（Longに統一）
    int delete(@Param("id") Long id);


    // --- 互換：カテゴリ名ベース（必要なら残す） ---

    // ユーザー×カテゴリ名（お気に入り除外）※旧API互換
    List<Output> findByUserAndCategory(
        @Param("userId") Integer userId,
        @Param("categoryName") String categoryName
    );


    // --- 新規：数値IDベース ---

    // ユーザー×カテゴリID（お気に入り除外）
    List<Output> findByUserAndCategoryExcludeFav(
        @Param("userId") int userId,
        @Param("categoryId") int categoryId
    );

    // 最近N件（ユーザー別）
    List<Output> findRecentByUser(
        @Param("userId") int userId,
        @Param("limit") int limit
    );
}