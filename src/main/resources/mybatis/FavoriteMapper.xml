<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.outputmanager.mapper.FavoriteMapper">

  <!-- ユーザーのお気に入り Output 一覧を取得 -->
  <select id="selectOutputsByUser"
          parameterType="int"
          resultType="com.example.outputmanager.domain.Output">
    SELECT
      o.id,
      o.user_id     AS userId,
      o.category_id AS categoryId,
      o.title,
      o.summary,
      o.detail,
      o.icon,
      o.video_url   AS videoUrl,
      o.created_at  AS createdAt,
      o.updated_at  AS updatedAt
    FROM favorites f
    JOIN outputs o ON o.id = f.output_id
    WHERE f.user_id = #{param1}
    ORDER BY o.created_at DESC
  </select>

</mapper>
